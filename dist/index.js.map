{"version":3,"file":"index.js","sources":["../node_modules/atomico/src/core/vnode.js","../node_modules/atomico/src/core/constants.js","../node_modules/atomico/src/core/utils.js","../node_modules/atomico/src/core/component.js","../node_modules/atomico/src/core/diff-props.js","../node_modules/atomico/src/core/diff.js","../node_modules/atomico/src/core/render.js","../node_modules/atomico/src/core/hooks.js","../node_modules/atomico/src/element/base-element.js","../node_modules/atomico/src/element/index.js","../src/web-components/ui-lazy-media/expression.js","../src/web-components/ui-lazy-media/components/background.js","../src/web-components/ui-lazy-media/index.js"],"sourcesContent":["/**\r\n * @param {VnodeType} type\r\n * @param {VnodeProps} [props]\r\n * @param {Vnode|Vnode[]} [children]\r\n * @returns {Vnode}\r\n **/\r\nexport function createElement(type, props, children) {\r\n\tprops = props || {};\r\n\tif (arguments.length > 3) {\r\n\t\tchildren = [children];\r\n\t\tfor (let i = 3; i < arguments.length; i++) {\r\n\t\t\tchildren.push(arguments[i]);\r\n\t\t}\r\n\t}\r\n\tif (children != null) {\r\n\t\tprops.children = children;\r\n\t}\r\n\r\n\tlet vnode = { type, props },\r\n\t\tkey = props.key;\r\n\tif (key != null) {\r\n\t\tvnode.key = \"\" + key;\r\n\t}\r\n\t/**@type {Vnode} */\r\n\treturn vnode;\r\n}\r\n/**\r\n * Create or maintain a vnode, if this is boolean,\r\n * string or null returns a text type vnode\r\n * @param {(Vnode|string|null|boolean)} value\r\n * @returns {Vnode}\r\n **/\r\nexport function toVnode(value) {\r\n\tif (value == null || typeof value == \"boolean\") value = \"\";\r\n\r\n\tif (typeof value == \"string\" || typeof value == \"number\") {\r\n\t\treturn createElement(null, null, \"\" + value);\r\n\t}\r\n\r\n\treturn value;\r\n}\r\n\r\n/**\r\n * @typedef {(Object<string,any>)} VnodeProps;\r\n *\r\n * @typedef {(Function|string)} VnodeType;\r\n *\r\n * @typedef {{type:VnodeType,props:VnodeProps}} Vnode\r\n **/\r\n","export const ARRAY_EMPTY = [];\r\nexport const OBJECT_EMPTY = {};\r\n\r\nexport const STATE = Symbol(\"Atomico.state\");\r\nexport const NODE_TYPE = \"localName\";\r\n\r\nexport const NODE_HOST = \"host\";\r\n\r\nexport const COMPONENT_CREATE = 0x61;\r\nexport const COMPONENT_UPDATE = 0x74;\r\nexport const COMPONENT_CREATED = 0x4f;\r\nexport const COMPONENT_UPDATED = 0x4d;\r\nexport const COMPONENT_CLEAR = 0x49;\r\nexport const COMPONENT_REMOVE = 0x43;\r\n\r\nexport const IGNORE_PROPS = {\r\n\tchildren: 1\r\n};\r\n\r\nexport const IGNORE_CHILDREN = {\r\n\tinnerHTML: 1,\r\n\ttextContent: 1,\r\n\tcontenteditable: 1\r\n};\r\n\r\nexport const HYDRATE_PROPS = {\r\n\tclassName: 1,\r\n\tid: 1,\r\n\tchecked: 1,\r\n\tvalue: 1,\r\n\tselected: 1\r\n};\r\n\r\nexport const MEMO_EVENT_NAME = {};\r\nexport const MEMO_CSS_PROPS = {};\r\n","/**\r\n * Return if value is array\r\n * @param {*}\r\n * @return {boolean}\r\n */\r\nexport function isArray(value) {\r\n\treturn Array.isArray(value);\r\n}\r\n/**\r\n * compare 2 array\r\n * @param {array} before\r\n * @param {array} after\r\n * @example\r\n * isEqualArray([1,2,3,4],[1,2,3,4]) // true\r\n * isEqualArray([1,2,3,4],[1,2,3])   // false\r\n * isEqualArray([5,1,2,3],[1,2,3,5]) // false\r\n * isEqualArray([],[]) // true\r\n * @returns {boolean}\r\n */\r\nexport function isEqualArray(before, after) {\r\n\tlet length = before.length;\r\n\tif (length !== after.length) return false;\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tif (before[i] !== after[i]) return false;\r\n\t}\r\n\treturn true;\r\n}\r\n\r\nexport function assign(master, commit) {\r\n\tfor (let key in commit) {\r\n\t\tmaster[key] = commit[key];\r\n\t}\r\n\tfor (let i = 2; i < arguments.length; i++) assign(master, arguments[i]);\r\n\treturn master;\r\n}\r\n\r\nexport let defer = Promise.prototype.then.bind(Promise.resolve());\r\n\r\nexport function isFunction(value) {\r\n\treturn typeof value == \"function\";\r\n}\r\n","import { assign, defer, isFunction } from \"./utils.js\";\r\nimport {\r\n\tCOMPONENT_CREATE,\r\n\tCOMPONENT_UPDATE,\r\n\tCOMPONENT_CREATED,\r\n\tCOMPONENT_UPDATED,\r\n\tCOMPONENT_REMOVE,\r\n\tCOMPONENT_CLEAR\r\n} from \"./constants.js\";\r\n\r\nimport { diff } from \"./diff.js\";\r\nimport { toVnode } from \"./vnode.js\";\r\n\r\n/**\r\n * @type {ComponentSnap}\r\n */\r\nlet CURRENT_COMPONENT;\r\n/**\r\n * @type {number}\r\n */\r\nlet CURRENT_COMPONENT_KEY_HOOK;\r\n/**\r\n * Returns the concurrent component running\r\n * @returns {ComponentSnap}\r\n */\r\nexport function getCurrentComponent() {\r\n\tif (!CURRENT_COMPONENT) {\r\n\t\tthrow new Error(\r\n\t\t\t\"the hooks can only be called from an existing functional component in the diff queue\"\r\n\t\t);\r\n\t}\r\n\treturn CURRENT_COMPONENT;\r\n}\r\n/**\r\n * Create or recover, the current state according to the global index\r\n * associated with the component\r\n * @param {Reducer} [reducer]\r\n * @param {*} state\r\n * @return {Hook};\r\n */\r\nexport function useHook(reducer, state) {\r\n\tlet component = getCurrentComponent().component;\r\n\tlet index = CURRENT_COMPONENT_KEY_HOOK++;\r\n\t/**@type {Hook} */\r\n\tlet hook;\r\n\tlet isCreate;\r\n\r\n\tif (!component.hooks[index]) {\r\n\t\tisCreate = true;\r\n\t\tcomponent.hooks[index] = [\r\n\t\t\tstate,\r\n\t\t\taction => {\r\n\t\t\t\tif (hook[2]) {\r\n\t\t\t\t\thook[0] = hook[2](hook[0], action);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t];\r\n\t}\r\n\thook = component.hooks[index];\r\n\thook[2] = reducer;\r\n\tif (isCreate) hook[1]({ type: COMPONENT_CREATE });\r\n\treturn hook;\r\n}\r\n\r\n/**\r\n * dispatches the state of the components to the hooks subscribed to the component\r\n * @param {ComponentSnap[]} components\r\n * @param {Action} action\r\n */\r\nexport function dispatchComponents(components, action) {\r\n\tlet length = components.length;\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tlet component = components[i],\r\n\t\t\thooks = component.hooks,\r\n\t\t\thooksLength = hooks.length;\r\n\t\t// Mark the component as deleted\r\n\t\tif (action.type === COMPONENT_REMOVE) {\r\n\t\t\tcomponent.remove = true;\r\n\t\t}\r\n\t\tfor (let i = 0; i < hooksLength; i++) {\r\n\t\t\t/**@type {Hook} */\r\n\t\t\tlet hook = hooks[i];\r\n\t\t\thook[1](action);\r\n\t\t}\r\n\t}\r\n}\r\n/**\r\n * this function allows creating a block that analyzes the tag\r\n * defined as a function, in turn creates a global update scope for hook management.\r\n * @param {import(\"./render\").ConfigRender} config - name of space to store the components\r\n * @param {boolean} isSvg - inherit svg behavior\r\n */\r\nexport function createComponent(config, isSvg) {\r\n\t/**@type {ComponentSnap[]} */\r\n\tlet components = [];\r\n\t/**@type {Element} */\r\n\tlet host;\r\n\t/**\r\n\t * This function allows reducing the functional components based on\r\n\t * their return, in turn creates a unique state for each component\r\n\t * according to a depth index\r\n\t * @param {Vnode} vnode\r\n\t * @param {Context} context\r\n\t * @param {number} deep - incremental index that defines the position of the component in the store\r\n\t */\r\n\tfunction nextComponent(vnode, deep) {\r\n\t\t// if host does not exist as a node, the vnode is not reduced\r\n\t\tif (!host) return;\r\n\t\tvnode = toVnode(vnode);\r\n\t\t// if it is different from a functional node, it is sent to diff again\r\n\t\tif (!isFunction(vnode.type)) {\r\n\t\t\tdispatchComponents(components.splice(deep), {\r\n\t\t\t\ttype: COMPONENT_REMOVE\r\n\t\t\t});\r\n\t\t\thost = diff(config, host, vnode, isSvg, updateComponent);\r\n\t\t\t// if the components no longer has a length, it is assumed that the updateComponent is no longer necessary\r\n\t\t\tif (components.length) host[config.id].updateComponent = updateComponent;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t/**@type {ComponentSnap} */\r\n\t\tlet component = components[deep] || {};\r\n\t\t/**\r\n\t\t * @type {boolean} define whether the component is created or updated\r\n\t\t */\r\n\t\tlet isCreate;\r\n\t\t/**\r\n\t\t * @type {boolean} Define whether the component should continue with the update\r\n\t\t */\r\n\t\tlet withNext;\r\n\r\n\t\tif (component.type != vnode.type) {\r\n\t\t\t// the elimination is sent to the successors of the previous component\r\n\t\t\tdispatchComponents(components.splice(deep), {\r\n\t\t\t\ttype: COMPONENT_REMOVE\r\n\t\t\t});\r\n\t\t\t// stores the state of the component\r\n\t\t\tcomponents[deep] = assign(\r\n\t\t\t\t{\r\n\t\t\t\t\thooks: [],\r\n\t\t\t\t\tref: {\r\n\t\t\t\t\t\tget current() {\r\n\t\t\t\t\t\t\treturn host;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tvnode\r\n\t\t\t);\r\n\t\t\tisCreate = true;\r\n\t\t\twithNext = true;\r\n\t\t}\r\n\r\n\t\tcomponent = components[deep];\r\n\t\t/**@type {Vnode} */\r\n\t\tlet nextProps = vnode.props;\r\n\t\t/**@type {Vnode} */\r\n\t\tlet prevProps = component.props;\r\n\r\n\t\t// Compare previous props with current ones\r\n\t\tif (!withNext) {\r\n\t\t\tlet length = Object.keys(prevProps).length,\r\n\t\t\t\tnextLength = 0;\r\n\t\t\t// compare the lake of properties\r\n\t\t\tfor (let key in nextProps) {\r\n\t\t\t\tnextLength++;\r\n\t\t\t\tif (nextProps[key] != prevProps[key]) {\r\n\t\t\t\t\twithNext = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twithNext = withNext || length != nextLength;\r\n\t\t}\r\n\r\n\t\tcomponent.props = nextProps;\r\n\r\n\t\t/**\r\n\t\t * Create a snapshot of the current component\r\n\t\t */\r\n\t\tfunction next() {\r\n\t\t\tif (component.remove) return host;\r\n\r\n\t\t\tCURRENT_COMPONENT = {\r\n\t\t\t\tcomponent,\r\n\t\t\t\t/**\r\n\t\t\t\t * updates the status of the component, forcing the update of this\r\n\t\t\t\t */\r\n\t\t\t\tnext() {\r\n\t\t\t\t\tif (!component.prevent) {\r\n\t\t\t\t\t\tcomponent.prevent = true;\r\n\t\t\t\t\t\tdefer(() => {\r\n\t\t\t\t\t\t\tcomponent.prevent = false;\r\n\t\t\t\t\t\t\tnext();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tCURRENT_COMPONENT_KEY_HOOK = 0;\r\n\r\n\t\t\tdispatchComponents([component], { type: COMPONENT_UPDATE });\r\n\r\n\t\t\tlet vnextnode = component.type(component.props);\r\n\t\t\t// clean state constants\r\n\t\t\tCURRENT_COMPONENT = false;\r\n\t\t\tCURRENT_COMPONENT_KEY_HOOK = 0;\r\n\r\n\t\t\tnextComponent(vnextnode, deep + 1);\r\n\r\n\t\t\tdispatchComponents([component], {\r\n\t\t\t\ttype: isCreate ? COMPONENT_CREATED : COMPONENT_UPDATED\r\n\t\t\t});\r\n\r\n\t\t\tisCreate = false;\r\n\t\t}\r\n\t\tif (withNext && !component.prevent) next();\r\n\t}\r\n\t/**\r\n\t * allows to control HoCs and optimizes the executions\r\n\t * of the components with the memo pattern\r\n\t * @param {string} type - action to execute\r\n\t * @param {Element} nextHost\r\n\t * @param {Vnode} vnode\r\n\t * @returns {Element}\r\n\t */\r\n\tfunction updateComponent(type, nextHost, vnode) {\r\n\t\tswitch (type) {\r\n\t\t\tcase COMPONENT_UPDATE:\r\n\t\t\t\thost = nextHost;\r\n\t\t\t\tnextComponent(vnode, 0);\r\n\t\t\t\treturn host;\r\n\t\t\tcase COMPONENT_CLEAR:\r\n\t\t\t\tdispatchComponents([].concat(components).reverse(), { type });\r\n\t\t\t\tbreak;\r\n\t\t\tcase COMPONENT_REMOVE:\r\n\t\t\t\thost = false;\r\n\t\t\t\tdispatchComponents(components.reverse(), { type });\r\n\t\t\t\tcomponents = [];\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\treturn updateComponent;\r\n}\r\n\r\n/**\r\n *\r\n * @typedef {{type:string}} Action\r\n *\r\n * @typedef {function(Object,Number):any} sample\r\n *\r\n * @typedef {function(Action):void} Dispatch\r\n *\r\n * @typedef {function(any,Action)} Reducer\r\n *\r\n * @typedef {[ any, Dispatch, Reducer ]} Hook - **[ state, dispatch , reducer ]**;\r\n *\r\n * @typedef {(HTMLElement|SVGElement|Text)} Element\r\n *\r\n * @typedef {import(\"./vnode\").Vnode} Vnode\r\n *\r\n * @typedef {Hook[]} Hooks\r\n *\r\n * @typedef {object} ComponentSnap\r\n * @property {{current:(HTMLElement|SVGElement)}} ref\r\n * @property {boolean} prevent\r\n * @property {Hooks} hooks\r\n * @property {Function} next\r\n * @property {Function} type\r\n * @property {import(\"./vnode\").VnodeProps} props\r\n **/\r\n","import {\r\n\tIGNORE_PROPS,\r\n\tIGNORE_CHILDREN,\r\n\tMEMO_CSS_PROPS,\r\n\tMEMO_EVENT_NAME,\r\n\tHYDRATE_PROPS\r\n} from \"./constants.js\";\r\nimport { isFunction } from \"./utils.js\";\r\n/**\r\n *\r\n * @param {import(\"./render\").HTMLNode} node\r\n * @param {Object} props\r\n * @param {Object} nextProps\r\n * @param {boolean} isSvg\r\n * @param {Object} handlers\r\n * @param {any} [bindEvent]\r\n **/\r\nexport function diffProps(node, props, nextProps, isSvg, handlers, bindEvent) {\r\n\tprops = props || {};\r\n\r\n\tfor (let key in props) {\r\n\t\tif (IGNORE_PROPS[key]) continue;\r\n\t\tif (!(key in nextProps)) {\r\n\t\t\tsetProperty(node, key, props[key], null, isSvg, handlers);\r\n\t\t}\r\n\t}\r\n\tlet ignoreChildren;\r\n\tfor (let key in nextProps) {\r\n\t\tif (IGNORE_PROPS[key]) continue;\r\n\t\tsetProperty(\r\n\t\t\tnode,\r\n\t\t\tkey,\r\n\t\t\tprops[key],\r\n\t\t\tnextProps[key],\r\n\t\t\tisSvg,\r\n\t\t\thandlers,\r\n\t\t\tbindEvent\r\n\t\t);\r\n\t\tignoreChildren = ignoreChildren || IGNORE_CHILDREN[key];\r\n\t}\r\n\treturn ignoreChildren;\r\n}\r\n\r\nfunction setProperty(\r\n\tnode,\r\n\tkey,\r\n\tprevValue,\r\n\tnextValue,\r\n\tisSvg,\r\n\thandlers,\r\n\tbindEvent\r\n) {\r\n\tkey = key == \"class\" && !isSvg ? \"className\" : key;\r\n\t// define empty value\r\n\tprevValue = prevValue == null ? null : prevValue;\r\n\tnextValue = nextValue == null ? null : nextValue;\r\n\r\n\tif (key in node && HYDRATE_PROPS[key]) {\r\n\t\tprevValue = node[key];\r\n\t}\r\n\r\n\tif (nextValue === prevValue) return;\r\n\r\n\tif (\r\n\t\tkey[0] == \"o\" &&\r\n\t\tkey[1] == \"n\" &&\r\n\t\t(isFunction(nextValue) || isFunction(prevValue))\r\n\t) {\r\n\t\tsetEvent(node, key, nextValue, handlers, bindEvent);\r\n\t\treturn;\r\n\t}\r\n\r\n\tswitch (key) {\r\n\t\tcase \"ref\":\r\n\t\t\tif (nextValue) nextValue.current = node;\r\n\t\t\tbreak;\r\n\t\tcase \"style\":\r\n\t\t\tsetStyle(node, prevValue || node.style.cssText, nextValue);\r\n\t\t\tbreak;\r\n\t\tcase \"shadowDom\":\r\n\t\t\tif (\"attachShadow\" in node) {\r\n\t\t\t\tif (\r\n\t\t\t\t\t(node.shadowRoot && !nextValue) ||\r\n\t\t\t\t\t(!node.shadowRoot && nextValue)\r\n\t\t\t\t) {\r\n\t\t\t\t\tnode.attachShadow({ mode: nextValue ? \"open\" : \"closed\" });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase \"key\":\r\n\t\t\tkey = \"data-key\";\r\n\t\t\tif (nextValue == null) {\r\n\t\t\t\tdelete node.dataset.key;\r\n\t\t\t} else {\r\n\t\t\t\tnode.dataset.key = nextValue;\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tif (!isSvg && key != \"list\" && key in node) {\r\n\t\t\t\tnode[key] = nextValue == null ? \"\" : nextValue;\r\n\t\t\t} else if (nextValue == null) {\r\n\t\t\t\tnode.removeAttribute(key);\r\n\t\t\t} else {\r\n\t\t\t\tnode.setAttribute(key, nextValue);\r\n\t\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n *\r\n * @param {import(\"./render\").HTMLNode} node\r\n * @param {string} type\r\n * @param {function} [nextHandler]\r\n * @param {object} handlers\r\n */\r\nexport function setEvent(node, type, nextHandler, handlers, bindEvent) {\r\n\t// memorize the transformation\r\n\tif (!MEMO_EVENT_NAME[type]) {\r\n\t\tMEMO_EVENT_NAME[type] = type.slice(2).toLocaleLowerCase();\r\n\t}\r\n\t// get the name of the event to use\r\n\ttype = MEMO_EVENT_NAME[type];\r\n\t// add handleEvent to handlers\r\n\tif (!handlers.handleEvent) {\r\n\t\t/**\r\n\t\t * {@link https://developer.mozilla.org/es/docs/Web/API/EventTarget/addEventListener#The_value_of_this_within_the_handler}\r\n\t\t **/\r\n\t\thandlers.handleEvent = event => handlers[event.type].call(bindEvent, event);\r\n\t}\r\n\tif (nextHandler) {\r\n\t\t// create the subscriber if it does not exist\r\n\t\tif (!handlers[type]) {\r\n\t\t\tnode.addEventListener(type, handlers);\r\n\t\t}\r\n\t\t// update the associated event\r\n\t\thandlers[type] = nextHandler;\r\n\t} else {\r\n\t\t// \tdelete the associated event\r\n\t\tif (handlers[type]) {\r\n\t\t\tnode.removeEventListener(type, handlers);\r\n\t\t\tdelete handlers[type];\r\n\t\t}\r\n\t}\r\n}\r\n/**\r\n * define style as string inline,this generates less mutation\r\n * to the sun and cleans the previously defined properties.\r\n * @param {import(\"./render\").HTMLNode} node\r\n * @param {(string|object)} prevValue\r\n * @param {(string|object)} nextValue\r\n */\r\nfunction setStyle(node, prevValue, nextValue) {\r\n\tlet prevCss = prevValue,\r\n\t\tnextCss = nextValue;\r\n\tif (typeof nextCss == \"object\") {\r\n\t\tnextCss = \"\";\r\n\t\tfor (let key in nextValue) {\r\n\t\t\tif (!nextValue[key]) continue;\r\n\t\t\t// memorizes the transformations associated with CSS properties\r\n\t\t\tif (!MEMO_CSS_PROPS[key]) {\r\n\t\t\t\tMEMO_CSS_PROPS[key] = key.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n\t\t\t}\r\n\t\t\tnextCss += `${MEMO_CSS_PROPS[key]}:${nextValue[key]};`;\r\n\t\t}\r\n\t}\r\n\tif (prevCss != nextCss) {\r\n\t\tnode.style.cssText = nextCss;\r\n\t}\r\n}\r\n","import {\r\n\tARRAY_EMPTY,\r\n\tNODE_TYPE,\r\n\tNODE_HOST,\r\n\tCOMPONENT_CLEAR,\r\n\tCOMPONENT_UPDATE,\r\n\tCOMPONENT_REMOVE\r\n} from \"./constants.js\";\r\nimport { isArray, isFunction } from \"./utils.js\";\r\nimport { toVnode } from \"./vnode.js\";\r\nimport { options } from \"./options.js\";\r\nimport { diffProps } from \"./diff-props.js\";\r\nimport { createComponent } from \"./component.js\";\r\n\r\n/**\r\n *\r\n * @param {import(\"./render\").ConfigRender} config\r\n * @param {import(\"./render\").HTMLNode} node\r\n * @param {import(\"./vnode\").Vnode} nextVnode\r\n * @param {boolean} isSvg\r\n * @param {Function} currentUpdateComponent\r\n * @return {import(\"./render\").HTMLNode}\r\n **/\r\nexport function diff(config, node, nextVnode, isSvg, currentUpdateComponent) {\r\n\tlet { vnode, updateComponent, handlers = {} } =\r\n\t\t(node && node[config.id]) || {};\r\n\r\n\tif (vnode == nextVnode) return node;\r\n\r\n\tvnode = vnode || { props: {} };\r\n\r\n\tlet { type, props } = nextVnode,\r\n\t\t{ shadowDom, children } = props,\r\n\t\tisComponent = isFunction(type);\r\n\r\n\tisSvg = isSvg || type == \"svg\";\r\n\tif (isComponent && !updateComponent) {\r\n\t\tupdateComponent = createComponent(config, isSvg);\r\n\t}\r\n\tif (!isComponent && type != NODE_HOST && getNodeName(node) !== type) {\r\n\t\tlet nextNode = createNode(type, isSvg),\r\n\t\t\tparent = node && node.parentNode;\r\n\r\n\t\tif (parent) {\r\n\t\t\tunmount(config, node, true, currentUpdateComponent);\r\n\t\t\tparent.replaceChild(nextNode, node);\r\n\t\t}\r\n\r\n\t\tnode = nextNode;\r\n\t\thandlers = {};\r\n\t}\r\n\tif (updateComponent && currentUpdateComponent != updateComponent) {\r\n\t\treturn updateComponent(COMPONENT_UPDATE, node, nextVnode);\r\n\t} else if (type == null) {\r\n\t\tif (node.nodeValue != children) {\r\n\t\t\tnode.nodeValue = children;\r\n\t\t}\r\n\t} else {\r\n\t\tlet ignoreChildren = diffProps(\r\n\t\t\tnode,\r\n\t\t\tvnode.props,\r\n\t\t\tnextVnode.props,\r\n\t\t\tisSvg,\r\n\t\t\thandlers,\r\n\t\t\tconfig.bind\r\n\t\t);\r\n\t\tif (!ignoreChildren && vnode.props.children != children) {\r\n\t\t\tdiffChildren(\r\n\t\t\t\tconfig,\r\n\t\t\t\tshadowDom ? node.shadowRoot || node : node,\r\n\t\t\t\tchildren,\r\n\t\t\t\tisSvg\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tnode[config.id] = { vnode: nextVnode, handlers };\r\n\treturn node;\r\n}\r\n/**\r\n *\r\n * @param {import(\"./render\").ConfigRender} config\r\n * @param {import(\"./render\").HTMLNode} parent\r\n * @param {import(\"./vnode\").Vnode[]} [nextChildren]\r\n * @param {boolean} isSvg\r\n */\r\nexport function diffChildren(config, parent, nextChildren, isSvg) {\r\n\tlet keyes = [],\r\n\t\tchildren = toList(nextChildren, false, keyes),\r\n\t\tchildrenLenght = children.length;\r\n\r\n\tlet childNodes = parent.childNodes,\r\n\t\tchildNodesKeyes = {},\r\n\t\tchildNodesLength = childNodes.length,\r\n\t\twithKeyes = keyes.withKeyes,\r\n\t\tindex = withKeyes\r\n\t\t\t? 0\r\n\t\t\t: childNodesLength > childrenLenght\r\n\t\t\t? childrenLenght\r\n\t\t\t: childNodesLength;\r\n\tfor (; index < childNodesLength; index++) {\r\n\t\tlet childNode = childNodes[index],\r\n\t\t\tkey = index;\r\n\t\tif (withKeyes) {\r\n\t\t\tkey = childNode.dataset.key;\r\n\t\t\tif (keyes.indexOf(key) > -1) {\r\n\t\t\t\tchildNodesKeyes[key] = childNode;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\t\tunmount(config.id, childNode);\r\n\t\tindex--;\r\n\t\tchildNodesLength--;\r\n\t\tparent.removeChild(childNode);\r\n\t}\r\n\tfor (let i = 0; i < childrenLenght; i++) {\r\n\t\tlet child = children[i],\r\n\t\t\tindexChildNode = childNodes[i],\r\n\t\t\tkey = withKeyes ? child.key : i,\r\n\t\t\tchildNode = withKeyes ? childNodesKeyes[key] : indexChildNode;\r\n\r\n\t\tif (withKeyes && childNode) {\r\n\t\t\tif (childNode != indexChildNode) {\r\n\t\t\t\tparent.insertBefore(childNode, indexChildNode);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet nextChildNode = diff(\r\n\t\t\tconfig,\r\n\t\t\t!childNode && isFunction(child.type) ? createNode(null) : childNode,\r\n\t\t\tchild,\r\n\t\t\tisSvg\r\n\t\t);\r\n\r\n\t\tif (!childNode) {\r\n\t\t\tif (childNodes[i]) {\r\n\t\t\t\tparent.insertBefore(nextChildNode, childNodes[i]);\r\n\t\t\t} else {\r\n\t\t\t\tparent.appendChild(nextChildNode);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n/**\r\n * Remove the node and issue the deletion if it belongs to a component\r\n * @param {string} id\r\n * @param {import(\"./render\").HTMLNode} node\r\n * @param {boolean} clear\r\n * @param {function} currentUpdateComponent\r\n */\r\nfunction unmount(id, node, clear, currentUpdateComponent) {\r\n\tlet { updateComponent } = node[id] || {},\r\n\t\tchildNodes = node.childNodes,\r\n\t\tlength = childNodes.length;\r\n\tif (updateComponent && updateComponent != currentUpdateComponent) {\r\n\t\tupdateComponent(clear ? COMPONENT_CLEAR : COMPONENT_REMOVE);\r\n\t}\r\n\tfor (let i = 0; i < length; i++) {\r\n\t\tunmount(id, childNodes[i]);\r\n\t}\r\n}\r\n/**\r\n *\r\n * @param {string} type\r\n * @param {boolean} isSvg\r\n * @returns {import(\"./render\").HTMLNode}\r\n */\r\nexport function createNode(type, isSvg) {\r\n\tlet doc = options.document || document,\r\n\t\tnextNode;\r\n\tif (type != null) {\r\n\t\tnextNode = isSvg\r\n\t\t\t? doc.createElementNS(\"http://www.w3.org/2000/svg\", type)\r\n\t\t\t: doc.createElement(type);\r\n\t} else {\r\n\t\tnextNode = doc.createTextNode(\"\");\r\n\t}\r\n\treturn nextNode;\r\n}\r\n\r\n/**\r\n * returns the localName of the node\r\n * @param {import(\"./render\").HTMLNode} node\r\n */\r\nexport function getNodeName(node) {\r\n\tif (!node) return;\r\n\tif (!node[NODE_TYPE]) {\r\n\t\tnode[NODE_TYPE] = node.nodeName.toLowerCase();\r\n\t}\r\n\tlet localName = node[NODE_TYPE];\r\n\treturn localName == \"#text\" ? null : localName;\r\n}\r\n/**\r\n * generates a flatmap of nodes\r\n * @param {?Array} children\r\n * @param {function} [map]\r\n * @param {string[]} keyes\r\n * @param {import(\"./vnode\").Vnode[]} list\r\n * @param {number} deep\r\n * @returns {import(\"./vnode\").Vnode[]}\r\n */\r\nexport function toList(children, map, keyes, list, deep = 0) {\r\n\tkeyes = keyes || [];\r\n\tlist = list || [];\r\n\r\n\tif (isArray(children)) {\r\n\t\tlet length = children.length;\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\ttoList(children[i], map, keyes, list, deep + 1);\r\n\t\t}\r\n\t} else {\r\n\t\tif (children == null && !deep) return ARRAY_EMPTY;\r\n\t\tlet vnode = map ? map(children, list.length) : toVnode(children);\r\n\t\tif (!map) {\r\n\t\t\tif (typeof vnode == \"object\") {\r\n\t\t\t\tif (vnode.key != null) {\r\n\t\t\t\t\tif (keyes.indexOf(vnode.key) == -1) {\r\n\t\t\t\t\t\tkeyes.push(vnode.key);\r\n\t\t\t\t\t\tkeyes.withKeyes = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tlist.push(vnode);\r\n\t}\r\n\treturn list;\r\n}\r\n","import { diff } from \"./diff.js\";\r\nimport { toVnode, createElement } from \"./vnode.js\";\r\nimport { STATE, NODE_HOST, OBJECT_EMPTY } from \"./constants.js\";\r\n\r\n/**\r\n *\r\n * @param {import(\"./vnode\").Vnode} vnode\r\n * @param {HTMLNode} parent\r\n * @param {Object} [options]\r\n **/\r\nexport function render(vnode, parent, options = OBJECT_EMPTY) {\r\n\t/**@type {ConfigRender}*/\r\n\tlet config = {\r\n\t\tid: options.id || STATE,\r\n\t\tbind: options.bind,\r\n\t\thost: options.host\r\n\t};\r\n\r\n\tvnode = toVnode(vnode);\r\n\r\n\tif (!config.host && vnode.type != NODE_HOST) {\r\n\t\tvnode = createElement(NODE_HOST, {}, vnode);\r\n\t}\r\n\r\n\tdiff(config, parent, vnode);\r\n}\r\n\r\n/**\r\n * @typedef {(HTMLElement|SVGElement|Text)} HTMLNode\r\n *\r\n * @typedef {object} ConfigRender\r\n * @property {string} id - namespace to store the state of the virtual-dom\r\n * @property {any} [bind] - Allows to bin events to a context this\r\n * @property {boolean} [host] - Allows a component to manipulate the main container\r\n **/\r\n","import { getCurrentComponent, useHook } from \"../core/component.js\";\r\nimport { isEqualArray, defer, isFunction } from \"../core/utils.js\";\r\n\r\nimport {\r\n\tCOMPONENT_CREATE,\r\n\tCOMPONENT_CREATED,\r\n\tCOMPONENT_UPDATE,\r\n\tCOMPONENT_UPDATED,\r\n\tCOMPONENT_REMOVE\r\n} from \"../core/constants.js\";\r\n\r\n/**\r\n * @return {HTMLElement}\r\n */\r\nexport function useHost() {\r\n\treturn getCurrentComponent().component.ref;\r\n}\r\n\r\nexport function useState(initialState) {\r\n\t/**@type {RefUseState} */\r\n\tlet ref = useHook(0, [])[0];\r\n\tif (!ref[1]) {\r\n\t\tlet next = getCurrentComponent().next;\r\n\t\tref.push(\r\n\t\t\tisFunction(initialState) ? initialState() : initialState,\r\n\t\t\tfunction setState(nextState) {\r\n\t\t\t\tref[0] = isFunction(nextState) ? nextState() : nextState;\r\n\t\t\t\tnext();\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\treturn ref;\r\n}\r\n\r\nexport function useEffect(callback, args) {\r\n\tuseHook((state, action) => {\r\n\t\tswitch (action.type) {\r\n\t\t\tcase COMPONENT_CREATE:\r\n\t\t\t\treturn { args };\r\n\t\t\tcase COMPONENT_UPDATE:\r\n\t\t\tcase COMPONENT_REMOVE:\r\n\t\t\t\tif (state.clear) {\r\n\t\t\t\t\tlet next =\r\n\t\t\t\t\t\taction.type == COMPONENT_REMOVE ||\r\n\t\t\t\t\t\t(args && state.args ? !isEqualArray(args, state.args) : true);\r\n\t\t\t\t\tif (next) state.clear.then(handler => handler && handler());\r\n\t\t\t\t}\r\n\t\t\t\treturn { args };\r\n\t\t\tcase COMPONENT_CREATED:\r\n\t\t\tcase COMPONENT_UPDATED:\r\n\t\t\t\tlet next =\r\n\t\t\t\t\t\taction.type == COMPONENT_CREATED ||\r\n\t\t\t\t\t\t(args && state.args ? !isEqualArray(args, state.args) : true),\r\n\t\t\t\t\tclear = state.clear;\r\n\t\t\t\tif (next) {\r\n\t\t\t\t\tclear = defer(callback);\r\n\t\t\t\t}\r\n\t\t\t\treturn { clear, args };\r\n\t\t}\r\n\t\treturn state;\r\n\t});\r\n}\r\n\r\nexport function useRef(current) {\r\n\treturn useHook(0, { current })[0];\r\n}\r\n\r\nexport function useMemo(callback, args) {\r\n\tlet ref = useHook(0, [])[0];\r\n\tif (!ref[0] || (ref[0] && !isEqualArray(ref[0], args))) {\r\n\t\tref[1] = callback();\r\n\t}\r\n\tref[0] = args;\r\n\treturn ref[1];\r\n}\r\n\r\nexport function useReducer(reducer, initialState) {\r\n\t/** @type {RefUseReducer} */\r\n\tlet ref = useHook(0, [])[0];\r\n\tif (!ref.current) {\r\n\t\tlet next = getCurrentComponent().next;\r\n\t\tref.push(initialState, action => {\r\n\t\t\tref[0] = ref[2](ref[0], action);\r\n\t\t\tnext();\r\n\t\t});\r\n\t}\r\n\tref[2] = reducer;\r\n\treturn ref;\r\n}\r\n\r\n/**\r\n * @typedef {function(*,*):void} SetState - **setState( nextState )**\r\n *\r\n * @typedef {[*, SetState]} RefUseState - **[state, setState]**\r\n *\r\n * @typedef {[*, import(\"../core/component\").Dispatch]} RefUseReducer - **[state, dispatch]**\r\n **/\r\n","/**\r\n * Applies JSON.parse to extract the real value of an attribute from a string.\r\n * @param {string} value\r\n * @returns {(boolean|string|number|Object|Array)}\r\n **/\r\nfunction parse(value) {\r\n\treturn JSON.parse(value);\r\n}\r\n\r\nexport default class Element extends HTMLElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t/**@type {Object<string,any>} */\r\n\t\tthis.props = {};\r\n\t\t/**@type {Promise} */\r\n\t\tthis.mounted = new Promise(resolve => (this.mount = resolve));\r\n\t\t/**@type {Promise} */\r\n\t\tthis.unmounted = new Promise(resolve => (this.unmount = resolve));\r\n\t}\r\n\tconnectedCallback() {\r\n\t\tthis.mount();\r\n\t}\r\n\tdisconnectedCallback() {\r\n\t\tthis.unmount();\r\n\t}\r\n\tattributeChangedCallback(name, oldValue, value) {\r\n\t\tif (oldValue == value) return;\r\n\t\tthis.setProperty(name, value);\r\n\t}\r\n\tstatic get observedAttributes() {\r\n\t\tlet observables = this.observables || {},\r\n\t\t\tattributes = [],\r\n\t\t\t/**\r\n\t\t\t * @param {string} - add the setter and getter to the constructor prototype\r\n\t\t\t */\r\n\t\t\tproxy = (name, attr, type) => {\r\n\t\t\t\tObject.defineProperty(this.prototype, name, {\r\n\t\t\t\t\tset(value) {\r\n\t\t\t\t\t\t// the attributes of the Boolean type will always be reflected in Element\r\n\t\t\t\t\t\tif (type === Boolean) {\r\n\t\t\t\t\t\t\tlet state = this.hasAttribute(attr);\r\n\t\t\t\t\t\t\tif ((value && state) || (!value && !state)) return;\r\n\t\t\t\t\t\t\tthis[value ? \"setAttribute\" : \"removeAttribute\"](attr, \"\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.setProperty(name, value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tget() {\r\n\t\t\t\t\t\treturn this.props[name];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\tfor (let key in observables) {\r\n\t\t\tlet attr = key.replace(/([A-Z])/g, \"-$1\").toLowerCase();\r\n\t\t\tattributes.push(attr);\r\n\t\t\tif (!(name in this.prototype)) proxy(key, attr, observables[key]);\r\n\t\t}\r\n\t\treturn attributes;\r\n\t}\r\n\t/**\r\n\t * validate to `value`, and then deliver it to the` update` method.\r\n\t * @param {name} name\r\n\t * @param {*} value\r\n\t */\r\n\tsetProperty(name, value) {\r\n\t\tname = name.replace(/-(\\w)/g, (all, letter) => letter.toUpperCase());\r\n\t\tlet { observables } = this.constructor,\r\n\t\t\terror,\r\n\t\t\ttype = observables[name];\r\n\t\ttry {\r\n\t\t\tif (typeof value == \"string\") {\r\n\t\t\t\tswitch (type) {\r\n\t\t\t\t\tcase Boolean:\r\n\t\t\t\t\t\tvalue = parse(value || \"true\") == true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase Number:\r\n\t\t\t\t\t\tvalue = Number(value);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase Object:\r\n\t\t\t\t\tcase Array:\r\n\t\t\t\t\t\tvalue = parse(value);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase Function:\r\n\t\t\t\t\t\tvalue = window[value];\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\terror = true;\r\n\t\t}\r\n\t\tif (\r\n\t\t\t(!error && {}.toString.call(value) == `[object ${type.name}]`) ||\r\n\t\t\tvalue == null\r\n\t\t) {\r\n\t\t\tif (this.props[name] !== value) this.update({ [name]: value });\r\n\t\t} else {\r\n\t\t\tthrow `the observable [${name}] must be of the type [${type.name}]`;\r\n\t\t}\r\n\t}\r\n}\r\n","import BaseElement from \"./base-element.js\";\r\nimport { createElement, render } from \"../core/index.js\";\r\n\r\nlet cache = {};\r\n\r\nexport class Element extends BaseElement {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t/**@type {boolean} */\r\n\t\tlet prevent;\r\n\t\t/**\r\n\t\t * @namespace\r\n\t\t * @property {string} id - identifier to store the state of the virtual-dom\r\n\t\t * @property {HTMLElement} bind - allows bindear events defining as context the same customElement\r\n\t\t * @property {boolean} host - allows to enable control over the main container, in this case the customElement\r\n\t\t */\r\n\t\tlet options = {\r\n\t\t\tid: Symbol(\"state\"),\r\n\t\t\tbind: this,\r\n\t\t\thost: true\r\n\t\t};\r\n\t\t/**\r\n\t\t * add support {@link https://developer.mozilla.org/es/docs/Web/API/CSSStyleSheet}\r\n\t\t */\r\n\t\tlet { styles } = this.constructor;\r\n\t\tthis.render = this.render.bind(this);\r\n\t\tlet nextProps = {};\r\n\t\t/**\r\n\t\t * @param {Object<string,any>} - Properties to update the component\r\n\t\t */\r\n\t\tthis.update = props => {\r\n\t\t\tfor (let key in props) nextProps[key] = props[key];\r\n\t\t\tif (!prevent) {\r\n\t\t\t\tprevent = true;\r\n\t\t\t\tthis.mounted.then(() => {\r\n\t\t\t\t\tlet props = (this.props = { ...this.props });\r\n\t\t\t\t\tfor (let key in nextProps) {\r\n\t\t\t\t\t\tlet value = nextProps[key];\r\n\t\t\t\t\t\tif (value == null) {\r\n\t\t\t\t\t\t\tdelete props[key];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tprops[key] = nextProps[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextProps = {};\r\n\t\t\t\t\trender(createElement(this.render, props), this, options);\r\n\t\t\t\t\tprevent = false;\r\n\t\t\t\t\tif (styles && this.shadowRoot) {\r\n\t\t\t\t\t\tthis.shadowRoot.adoptedStyleSheets = styles;\r\n\t\t\t\t\t\tstyles = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.unmounted.then(() => render(\"\", this, options));\r\n\r\n\t\tthis.update();\r\n\t}\r\n}\r\n/**\r\n * @param {Function} component\r\n * @example\r\n * // define a functional component\r\n * function MyWc(props){}\r\n * // define the observables of the component\r\n * MyWc.observables = {value:String}\r\n * // when using the toClass function the functional component will be a class\r\n * customElements.define(\"my-wc\",createClass(MyWc));\r\n */\r\nexport function createClass(component) {\r\n\tlet CustomElement = class extends Element {};\r\n\tCustomElement.prototype.render = component;\r\n\tCustomElement.observables = component.observables;\r\n\tCustomElement.styles = component.styles;\r\n\treturn CustomElement;\r\n}\r\n/**\r\n * register the component, be it a class or function\r\n * @param {string} tagName\r\n * @param {Function} component\r\n * @return {Object} returns a jsx component\r\n */\r\nexport function customElement(tagName, component) {\r\n\tcustomElements.define(\r\n\t\ttagName,\r\n\t\tcomponent instanceof Element ? component : createClass(component)\r\n\t);\r\n\treturn props => createElement(tagName, props);\r\n}\r\n\r\nexport function css(string) {\r\n\tif (Array.isArray(string)) {\r\n\t\tlet args = arguments;\r\n\t\tstring = string\r\n\t\t\t.map((value, index) => value + (args[index + 1] || \"\"))\r\n\t\t\t.join(\"\");\r\n\t}\r\n\tif (!cache[string]) {\r\n\t\tcache[string] = new CSSStyleSheet();\r\n\t\tcache[string].replace(string);\r\n\t}\r\n\treturn cache[string];\r\n}\r\n","function expression(exp) {\r\n\tlet sizes = [];\r\n\tlet media = exp\r\n\t\t.replace(/&&/g, \" and \")\r\n\t\t.replace(/(\\d+)(\\w|h)(!){0,1}/g, (all, size, type, negative) => {\r\n\t\t\tsizes.push(Number(size) * (negative ? -1 : 1));\r\n\t\t\treturn `(${negative ? \"min-\" : \"max-\"}${\r\n\t\t\t\ttype == \"w\" ? \"width\" : \"height\"\r\n\t\t\t}: ${size}px)`;\r\n\t\t});\r\n\treturn {\r\n\t\tmedia,\r\n\t\tsizes\r\n\t};\r\n}\r\n\r\nexport default function parse(srcset) {\r\n\tlet sources = [];\r\n\treturn {\r\n\t\tsrc: srcset\r\n\t\t\t.replace(/([^,])$/, \"$1,\")\r\n\t\t\t.replace(/\\s+/g, \" \")\r\n\t\t\t.replace(\r\n\t\t\t\t/([^,]+) +((?:\\d+)(?:w|h)(?:!){0,1}(&&(?:\\d+)(?:w|h)(?:!){0,1}){0,}),/g,\r\n\t\t\t\t(all, src, exp) => {\r\n\t\t\t\t\tlet { media, sizes } = expression(exp);\r\n\t\t\t\t\tsources.push({\r\n\t\t\t\t\t\tsrc,\r\n\t\t\t\t\t\tmedia,\r\n\t\t\t\t\t\torder: sizes.reduce((total, value) => total + value, 0)\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn media ? \"\" : all;\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\t.replace(/, *$/, \"\"),\r\n\t\tsources: sources.sort((a, b) => (a.order > b.order ? 1 : -1))\r\n\t};\r\n}\r\n","import { h } from \"atomico\";\r\n\r\nfunction setBackground(src) {\r\n\treturn `:host{${\r\n\t\t/ *url\\(/.test(src) ? `background:${src}` : `background:url(${src})`\r\n\t}}`;\r\n}\r\n\r\nexport default function Background({ sources, src }) {\r\n\tsources = [].concat(sources).reverse();\r\n\treturn (\r\n\t\t<style>\r\n\t\t\t{src && setBackground(src)}\r\n\t\t\t{sources.map(\r\n\t\t\t\tsource => `@media ${source.media}{${setBackground(source.src)}}`\r\n\t\t\t)}\r\n\t\t</style>\r\n\t);\r\n}\r\n","import useIntersectionObserver from \"../../hooks/useIntersectionObserver\";\r\nimport { h, customElement, useMemo, useEffect } from \"atomico\";\r\n\r\nimport parse from \"./expression\";\r\nimport Video from \"./components/video\";\r\nimport Image from \"./components/image\";\r\nimport Background from \"./components/background\";\r\n\r\nfunction LazyMedia({ type, srcset = \"\", lazy, shadowDom, styleMedia }) {\r\n\tlet state = useMemo(() => parse(srcset), [srcset]);\r\n\tlet intercepted = useIntersectionObserver();\r\n\treturn (\r\n\t\t<host\r\n\t\t\tshadowDom={shadowDom || type == \"background\"}\r\n\t\t\tintercepted={intercepted}\r\n\t\t\tlazy={lazy || intercepted}\r\n\t\t>\r\n\t\t\t{lazy ? (\r\n\t\t\t\ttype == \"video\" ? (\r\n\t\t\t\t\t<Video {...state} intercepted={intercepted} styleMedia={styleMedia} />\r\n\t\t\t\t) : type == \"background\" ? (\r\n\t\t\t\t\t<Background {...state} />\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<Image {...state} styleMedia={styleMedia} />\r\n\t\t\t\t)\r\n\t\t\t) : (\r\n\t\t\t\t\"\"\r\n\t\t\t)}\r\n\t\t</host>\r\n\t);\r\n}\r\n\r\nLazyMedia.observables = {\r\n\ttype: String,\r\n\tlazy: Boolean,\r\n\tsrcset: String,\r\n\tintercepted: Boolean,\r\n\tshadowDom: Boolean,\r\n\tstyleMedia: String\r\n};\r\n\r\ncustomElement(\"ui-lazy-media\", LazyMedia);\r\n"],"names":["createElement","type","props","children","arguments","length","i","push","vnode","key","toVnode","value","ARRAY_EMPTY","OBJECT_EMPTY","STATE","Symbol","NODE_TYPE","NODE_HOST","COMPONENT_CREATE","COMPONENT_UPDATE","COMPONENT_CREATED","COMPONENT_UPDATED","COMPONENT_CLEAR","COMPONENT_REMOVE","IGNORE_PROPS","IGNORE_CHILDREN","innerHTML","textContent","contenteditable","HYDRATE_PROPS","className","id","checked","selected","MEMO_EVENT_NAME","MEMO_CSS_PROPS","isEqualArray","before","after","CURRENT_COMPONENT","CURRENT_COMPONENT_KEY_HOOK","defer","Promise","prototype","then","bind","resolve","isFunction","setProperty","node","prevValue","nextValue","isSvg","handlers","bindEvent","current","prevCss","nextCss","replace","toLowerCase","style","cssText","setStyle","shadowRoot","attachShadow","mode","dataset","removeAttribute","setAttribute","nextHandler","slice","toLocaleLowerCase","handleEvent","event","call","addEventListener","removeEventListener","setEvent","getCurrentComponent","Error","useHook","reducer","state","hook","isCreate","component","index","hooks","action","dispatchComponents","components","hooksLength","remove","createComponent","config","host","nextComponent","deep","splice","diff","updateComponent","withNext","assign","master","commit","ref","nextProps","prevProps","Object","keys","nextLength","prevent","next","[object Object]","vnextnode","nextHost","concat","reverse","nextVnode","currentUpdateComponent","shadowDom","isComponent","nodeName","localName","getNodeName","nextNode","createNode","parent","parentNode","unmount","replaceChild","nodeValue","ignoreChildren","diffProps","nextChildren","keyes","toList","map","list","Array","isArray","indexOf","withKeyes","childrenLenght","childNodes","childNodesKeyes","childNodesLength","childNode","removeChild","child","indexChildNode","insertBefore","nextChildNode","appendChild","diffChildren","clear","doc","document","createElementNS","createTextNode","render","options","useEffect","callback","args","handler","parse","JSON","Element","HTMLElement","super","this","mounted","mount","unmounted","name","oldValue","observedAttributes","observables","attributes","proxy","attr","defineProperty","Boolean","hasAttribute","all","letter","toUpperCase","error","constructor","Number","Function","window","e","toString","update","BaseElement","styles","adoptedStyleSheets","initialState","nextState","tagName","LazyMedia","customElements","define","CustomElement","createClass"],"mappings":"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"}